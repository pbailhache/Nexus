<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Expantion Origin - local</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="David Mouton">
		<link href="css/style.css" rel="stylesheet" media="screen">
		<LINK href="css/player.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div class="applicationWindow">
        <div class="applicationContainer">
            <div class="applicationHeader">
                <div id="playerOneName" class="playerName" style="position: relative; float: left; left: 0px;">Unknown</div>
                <div id="playerTwoName" class="playerName" style="position:absolute; text-align:right;">Unknown</div>
                <div style="text-align: center; left: 0px; right: 0px; position: absolute; width:771px">
                    <span class="score">score</span>
                    <span id="playerOneScore" class="playerOneScore">0</span>
                    <button id="fightButton" class="fightButton">FIGHT</button>
                    <span id="playerTwoScore" class="playerTwoScore">0</span>
                    <span class="score">score</span>
                </div>
            </div>
            <canvas id="applicationCanvas" style="width:771; height:435"/>
        </div>
	</div>

	<div id="haxe:trace" class="trace" style="padding-left: 10px;position: fixed;left: 800px;top: 0;height: 900px;width: 1000px;overflow: auto;border-left: 5px solid black;">
		
	</div>
		<button onclick="subfunction()">Lancer la boucle de test</button>
		<button onclick="display_stats()">Afficher les stats</button>
		<span id="win1" class="win1">0</span>
        <span id="winratio" class="winratio">0</span>
        <span id="win2" class="win2">0</span>
		<script src="js/jquery-1.9.0.min.js"></script>
		<script src="js/bean.js"></script>
		<script src="js/easeljs-0.5.0.min.js"></script>
		<script src="js/tweenjs-0.3.0.min.js"></script>
		<script src="js/preloadjs-0.2.0.min.js"></script>
		<script src="js/PlanetWarsHaxeJS.js"></script>
		<script>
		function stats()
		{
			PlanetWars.init("ia1","ia1.js","ia2","ia2.js");
			PlanetWars._renderer.start();
			var score1 = document.getElementById("playerOneScore").innerHTML;
			var score2 = document.getElementById("playerTwoScore").innerHTML;

			if(score1 < score2)
				window.win1++;
			else
				window.win2++
		}
		
		function display_stats()
		{
			document.getElementById("win1").innerHTML = window.win1;
			document.getElementById("win2").innerHTML = window.win2;
			var ratio = window.win1/(window.win1+window.win2);
			document.getElementById("winratio").innerHTML = ratio;
		}
		
		function subfunction()
		{
			var delay = 3000; //ms
			var limit = 10;
			for(var i = 0; i < limit; i++)
				setTimeout(stats, i * delay);
			setTimeout(display_stats, limit * delay);
			setTimeout(display_alert, limit * delay);
		}
		
		function display_alert()
		{
			alert("Boucle terminÃ©e");
		}

		function init()
		{
			window.win1 = 0;
			window.win2 = 0;
			PlanetWars.init("ia1","ia1.js","ia2","ia2.js");

		};
		window.onload = init;
		</script>
	</body>
</html>